<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width = device-width" />
    <title>个人资料</title>
    <link href="/style/layui/css/layui.css?201908072009" rel="stylesheet" />
    <link href="/style/css/main.css?v=201922262" rel="stylesheet" />
    <link href="/style/css/layout.css?v=201908072011" rel="stylesheet" />
    <link href="/style/css/common.css?v=201908072040" rel="stylesheet" />
    <link href="/style/css/global.css?v=1" rel="stylesheet" />
    <link href="/style/css/spin.css" rel="stylesheet" />
    <script src="/style/js/jquery.js"></script>
    <script src="/style/layui/layui.js?v=3"></script>
    <style>
        .layui-table-tool-self {
            display: none;
        }
    </style>
</head>

<body class="marginTop">
    <iframe id="console" frameborder=0 width="100%" height="66px" scrolling=no marginwidth='0' marginheight='0'
        noresize="noresize" src="../master/top"></iframe>
    <div class="main">
        <div class="left">
            <ul class="layui-nav layui-nav-tree layui-inline" lay-filter="demo"
                style="margin-right: 10px;height: 506px;background-color: #393D49;">
                <li class="layui-nav-item layui-this" onclick="setTab(1)">
                    <a href="javascript:;">个人中心</a>
                </li>
                <li class="layui-nav-item" onclick="setTab(2)">
                    <a href="javascript:;">我的主页</a>
                </li>
                <li class="layui-nav-item" onclick="setTab(3)">
                    <a href="javascript:;">我的帖子</a>
                </li>
                <li class="layui-nav-item" onclick="setTab(4)">
                    <a href="javascript:;">我的消息</a>
                </li>
            </ul>
        </div>
        <div class="right">
            <div class="layui-tab layui-tab-brief" lay-filter="" id="tab_1">
                <ul class="layui-tab-title">
                    <li class="layui-this">基本资料</li>
                    <li>修改头像</li>
                    <li>修改密码</li>
                </ul>
                <div class="layui-tab-content" style="height: 100px;">
                    <div class="layui-tab-item layui-show">
                        <form class="layui-form layui-form-pane user-profile" lay-filter="userinfo">
                            <div class="layui-form-item">
                                <label class="layui-form-label">登录账号</label>
                                <div class="layui-input-block">
                                    <input type="text" name="account" lay-verify="required"
                                        style="width: 200px !important" autocomplete="off" readonly unselectable="on"
                                        class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">昵称</label>
                                <div class="layui-input-block">
                                    <input type="text" name="username" lay-verify="required"
                                        style="width: 200px !important" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item" pane="" style="width: 307px !important">
                                <label class="layui-form-label">性别</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="sex" value="男" title="男" checked="">
                                    <input type="radio" name="sex" value="女" title="女">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">出生日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="birthdate" id="birthdate" autocomplete="off"
                                            style="width: 200px !important" class="layui-input layui-icon-date"
                                            placeholder="年-月-日">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">手机号</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="phone" lay-verify="phone" autocomplete="off"
                                            style="width: 200px !important" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">邮箱</label>
                                    <div class="layui-input-block">
                                        <input type="email" name="email" lay-verify="email" autocomplete="off"
                                            style="width: 200px !important" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item layui-form-text sign">
                                <label class="layui-form-label">个性签名</label>
                                <div class="layui-input-block">
                                    <textarea name="sign" placeholder="请输入个性签名" class="layui-textarea"></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <button class="layui-btn" lay-submit="" lay-filter="editUser">保存修改</button>
                            </div>
                        </form>
                    </div>
                    <div class="layui-tab-item">
                        <div class="layui-form-item">
                            <div class="avatar-add">
                                <p>建议尺寸168*168，支持jpg、png、gif</p>
                                <button type="button" class="layui-btn upload-img" id="upload">
                                    <i class="layui-icon"></i>上传头像 </button>
                                <input class="layui-upload-file" type="file" accept="" name="file">
                                <img id="touxiang"> <span class="loading"></span>
                            </div>
                        </div>
                    </div>
                    <div class="layui-tab-item">
                        <form class="layui-form layui-form-pane user-profile" action="" method="post">
                            <div class="layui-form-item">
                                <label class="layui-form-label">当前密码</label>
                                <div class="layui-input-block">
                                    <input type="password" name="oldpassword" id="oldpassword" autocomplete="off"
                                        lay-verify="required" style="width: 200px !important" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">新密码</label>
                                <div class="layui-input-block">
                                    <input type="password" name="newpassword" id="newpassword" autocomplete="off"
                                        lay-verify="required" style="width: 200px !important" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">确认密码</label>
                                <div class="layui-input-block">
                                    <input type="password" name="confirmpassword" autocomplete="off"
                                        lay-verify="required|confirmpassword" style="width: 200px !important"
                                        class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <button class="layui-btn" lay-submit="" lay-filter="editPassword">保存修改</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="layui-tab layui-tab-brief" lay-filter="" id="tab_2" style="display: none;">
                <div class="about-content">
                    <div class="item info">
                        <div class="cont" style="margin-left: 25px;">
                            <img src="/style/images/weixi.jpg"
                                style="border-radius: 100%;border:1px dotted #ddd;height: 139px">
                            <br />
                            <span class="name">小明</span><br />
                            <span class="age">24岁</span><br />
                            <span class="Career">设计师, 前端工程师</span><br />
                            <span class="interest">爱好旅游,打游戏</span>
                        </div>
                    </div>
                    <div class="item tool">
                        <div class="title">
                            <h3>我的技能</h3>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-tab layui-tab-brief" lay-filter="" id="tab_3" style="display: none;">
                <div class="tiezi" style="margin-top: 22px;">
                    <div style="width: 900px;">
                        <input type="text" autocomplete="off" placeholder="标题查询" style="width: 200px !important;float: left"
                            class="layui-input">
                            <select name="city" lay-verify="">
                                    <option value="0">否</option>
                                    <option value="1">是</option>
                                  </select>  
                        <button class="layui-btn"  style="float: right;margin-right: 52px;"
                            lay-filter="LAY-user-front-search">
                            <i class="layui-icon layui-icon-search "></i>
                    </div>
                    <div style="float: left;">
                        </button>
                        <table class="layui-hide" id="test" lay-filter="test"></table>
                        <script type="text/html" id="barDemo">
                        <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
                        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
                        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
                      </script>
                    </div>
                </div>
            </div>
            <div class="layui-tab layui-tab-brief" lay-filter="" id="tab_3" style="display: none;">
            </div>
            <div class="layui-tab layui-tab-brief" lay-filter="" id="tab_4" style="display: none;">
            </div>
        </div>
        <script src="/style/js/jquery.js"></script>
        <script src="/style/layui/layui.js"></script>
        <script src="/style/js/request.js"></script>
        <script src="/style/js/index.js"></script>
        <script>
            layui.use(['form', 'element', 'laydate', 'upload', 'table'], function () {
                var form = layui.form
                    , laydate = layui.laydate
                    , upload = layui.upload
                    , table = layui.table;
                var loading;
                bindUser(form);
                verify(form);
                var uploadInst = upload.render({
                    elem: '#upload'
                    , headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }
                    , data: {
                        width: 168,
                        height: 168,
                        isAbs: true
                    }
                    , url: url + 'user/uploadPhoto' //上传接口
                    , before: function () {
                        loading = layer.load(2);
                    }
                    , done: function (res) {
                        localStorage.setItem("token", res.data.token);
                        $("#touxiang").attr("src", res.data.path);
                        $("#photo").attr('src', res.data.path);
                        location.reload();
                    }
                });
                laydate.render({
                    elem: '#birthdate'
                });
                editUser(form);
                editPassword(form);
                table.render({
                    elem: '#test'
                    , url: '/test/table/demo1.json'
                    , toolbar: false //开启头部工具栏，并为其绑定左侧模板
                    , width: 850
                    , title: '用户数据表'
                    , cols: [[
                        { type: 'checkbox' }
                        , { field: 'id', title: 'ID', hide: true, unresize: true }
                        , { field: 'Title', title: '标题' }
                        , { field: 'Author', title: '作者' }
                        , { field: 'IsDraft', title: '是否草稿' }
                        , { field: 'SubmitDate', title: '提交日期', sort: true }
                        , { align: 'center', toolbar: '#barDemo' }
                    ]]
                    , page: true
                });

                //监听行工具事件
                table.on('tool(test)', function (obj) {
                    var data = obj.data;
                    //console.log(obj)
                    if (obj.event === 'del') {
                        layer.confirm('真的删除行么', function (index) {
                            obj.del();
                            layer.close(index);
                        });
                    } else if (obj.event === 'edit') {
                        layer.prompt({
                            formType: 2
                            , value: data.email
                        }, function (value, index) {
                            obj.update({
                                email: value
                            });
                            layer.close(index);
                        });
                    }
                });
            })
        </script>
</body>

</html>